/** SALES CHART
******************************************* **/
var bal = jQuery("#bal-interest");
loadScript(plugin_path + "chart.flot/jquery.flot.min.js", function(){
    loadScript(plugin_path + "chart.flot/jquery.flot.resize.min.js", function(){
        loadScript(plugin_path + "chart.flot/jquery.flot.time.min.js", function(){
            loadScript(plugin_path + "chart.flot/jquery.flot.fillbetween.min.js", function(){
                loadScript(plugin_path + "chart.flot/jquery.flot.orderBars.min.js", function(){
                    loadScript(plugin_path + "chart.flot/jquery.flot.pie.min.js", function(){
                        loadScript(plugin_path + "chart.flot/jquery.flot.tooltip.min.js", function(){

                            if (bal.length > 0) {

                                /* DEFAULTS FLOT COLORS */
                                var $color_border_color = "#eaeaea",		/* light gray 	*/
                                    $color_blue 		= "#002A52",		/* blue      	*/
                                    $color_green 		= "#98AD4E";		    /* green      	*/


                                // var d = [
                                //     [1196463600000, 0], [1196550000000, 0], [1196636400000, 0], [1196722800000, 77], [1196809200000, 3636], [1196895600000, 3575], [1196982000000, 2736], [1197068400000, 1086], [1197154800000, 676], [1197241200000, 1205], [1197327600000, 906], [1197414000000, 710], [1197500400000, 639], [1197586800000, 540], [1197673200000, 435], [1197759600000, 301], [1197846000000, 575], [1197932400000, 481], [1198018800000, 591], [1198105200000, 608], [1198191600000, 459], [1198278000000, 234], [1198364400000, 4568], [1198450800000, 686], [1198537200000, 4122], [1198623600000, 449], [1198710000000, 468], [1198796400000, 392], [1198882800000, 282], [1198969200000, 208], [1199055600000, 229], [1199142000000, 177], [1199228400000, 374], [1199314800000, 436], [1199401200000, 404], [1199487600000, 544], [1199574000000, 500], [1199660400000, 476], [1199746800000, 462], [1199833200000, 500], [1199919600000, 700], [1200006000000, 750], [1200092400000, 600], [1200178800000, 500], [1200265200000, 900], [1200351600000, 930], [1200438000000, 1200], [1200524400000, 980], [1200610800000, 950], [1200697200000, 900], [1200783600000, 1000], [1200870000000, 1050], [1200956400000, 1150], [1201042800000, 1100], [1201129200000, 1200], [1201215600000, 1300], [1201302000000, 1700], [1201388400000, 1450], [1201474800000, 1500], [1201561200000, 1510], [1201647600000, 1510], [1201734000000, 1510], [1201820400000, 1700], [1201906800000, 1800], [1201993200000, 1900], [1202079600000, 2000], [1202166000000, 2100], [1202252400000, 2200], [1202338800000, 2300], [1202425200000, 2400], [1202511600000, 2550], [1202598000000, 2600], [1202684400000, 2500], [1202770800000, 2700], [1202857200000, 2750], [1202943600000, 2800], [1203030000000, 3245], [1203116400000, 3345], [1203202800000, 3000], [1203289200000, 3200], [1203375600000, 3300], [1203462000000, 3400], [1203548400000, 3600], [1203634800000, 3700], [1203721200000, 3800], [1203807600000, 4000], [1203894000000, 4500]];

                                var d =[
                                    {   label: "Balance",
                                        data: [[1196463600000, 0], [1196550000000, 0], [1196636400000, 0], [1196722800000, 77], [1196809200000, 3636], [1196895600000, 3575], [1196982000000, 2736], [1197068400000, 1086], [1197154800000, 676], [1197241200000, 1205], [1197327600000, 906], [1197414000000, 710], [1197500400000, 639], [1197586800000, 540], [1197673200000, 435], [1197759600000, 301], [1197846000000, 575], [1197932400000, 481], [1198018800000, 591], [1198105200000, 608], [1198191600000, 459], [1198278000000, 234], [1198364400000, 4568], [1198450800000, 686], [1198537200000, 4122], [1198623600000, 449], [1198710000000, 468], [1198796400000, 392], [1198882800000, 282], [1198969200000, 208], [1199055600000, 229], [1199142000000, 177], [1199228400000, 374], [1199314800000, 436], [1199401200000, 404], [1199487600000, 544], [1199574000000, 500], [1199660400000, 476], [1199746800000, 462], [1199833200000, 500], [1199919600000, 700], [1200006000000, 750], [1200092400000, 600], [1200178800000, 500], [1200265200000, 900], [1200351600000, 930], [1200438000000, 1200], [1200524400000, 980], [1200610800000, 950], [1200697200000, 900], [1200783600000, 1000], [1200870000000, 1050], [1200956400000, 1150], [1201042800000, 1100], [1201129200000, 1200], [1201215600000, 1300], [1201302000000, 1700], [1201388400000, 1450], [1201474800000, 1500], [1201561200000, 1510], [1201647600000, 1510], [1201734000000, 1510], [1201820400000, 1700], [1201906800000, 1800], [1201993200000, 1900], [1202079600000, 2000], [1202166000000, 2100], [1202252400000, 2200], [1202338800000, 2300], [1202425200000, 2400], [1202511600000, 2550], [1202598000000, 2600], [1202684400000, 2500], [1202770800000, 2700], [1202857200000, 2750], [1202943600000, 2800], [1203030000000, 3245], [1203116400000, 3345], [1203202800000, 3000], [1203289200000, 3200], [1203375600000, 3300], [1203462000000, 3400], [1203548400000, 3600], [1203634800000, 3700], [1203721200000, 3800], [1203807600000, 4000], [1203894000000, 4500]]
                                    },
                                    {   label: "Interest",
                                        data: [[1196463600000, 0], [1196550000000, 5], [1196636400000, 50], [1196722800000, 86], [1196809200000, 3646], [1196895600000, 3579], [1196982000000, 2756], [1197068400000, 1091], [1197154800000, 680], [1197241200000, 1225], [1197327600000, 916], [1197414000000, 710], [1197500400000, 643], [1197586800000, 554], [1197673200000, 445], [1197759600000, 341], [1197846000000, 565], [1197932400000, 491], [1198018800000, 591], [1198105200000, 616], [1198191600000, 479], [1198278000000, 254], [1198364400000, 4585], [1198450800000, 689], [1198537200000, 4132], [1198623600000, 459], [1198710000000, 478], [1198796400000, 411], [1198882800000, 292], [1198969200000, 216], [1199055600000, 219], [1199142000000, 185], [1199228400000, 379], [1199314800000, 446], [1199401200000, 416], [1199487600000, 564], [1199574000000, 512], [1199660400000, 486], [1199746800000, 482], [1199833200000, 510], [1199919600000, 710], [1200006000000, 760], [1200092400000, 610], [1200178800000, 510], [1200265200000, 921], [1200351600000, 937], [1200438000000, 1209], [1200524400000, 987], [1200610800000, 952], [1200697200000, 906], [1200783600000, 1021], [1200870000000, 1055], [1200956400000, 1158], [1201042800000, 1107], [1201129200000, 1239], [1201215600000, 1356], [1201302000000, 1743], [1201388400000, 1467], [1201474800000, 1590], [1201561200000, 1532], [1201647600000, 1543], [1201734000000, 1511], [1201820400000, 1706], [1201906800000, 1802], [1201993200000, 2900], [1202079600000, 2500], [1202166000000, 3100], [1202252400000, 3200], [1202338800000, 3300], [1202425200000, 3400], [1202511600000, 3550], [1202598000000, 2900], [1202684400000, 3500], [1202770800000, 3700], [1202857200000, 3750], [1202943600000, 3800], [1203030000000, 4245], [1203116400000, 4345], [1203202800000, 4000], [1203289200000, 4200], [1203375600000, 4300], [1203462000000, 4400], [1203548400000, 3600], [1203634800000, 4700], [1203721200000, 4800], [1203807600000, 5000], [1203894000000, 4900]],
                                        yaxis: 2
                                    }
                                ];

                                // for (var i = 0; i < d.length; ++i) {
                                //     d[i][0] += 60 * 60 * 1000;
                                // }

                                var options = {
                                    xaxis : {
                                        mode : "time",
                                        tickLength : 5
                                    },
                                    yaxes : [ { tickFormatter: tzsFormatter }, {
                                        // align if we are to the right
                                        alignTicksWithAxis: 1,
                                        position: "right",
                                        tickFormatter: tzsFormatter
                                    } ],
                                    series : {
                                        lines : {
                                            show : true,
                                            lineWidth : 1,
                                            // fill : true,
                                            fillColor : {
                                                colors : [{
                                                    opacity : 0.1
                                                }, {
                                                    opacity : 0.15
                                                }]
                                            }
                                        },
                                       //points: { show: true },
                                        shadowSize : 0
                                    },
                                    selection : {
                                        mode : "x"
                                    },
                                    grid : {
                                        hoverable : true,
                                        clickable : true,
                                        tickColor : $color_border_color,
                                        borderWidth : 0,
                                        borderColor : $color_border_color
                                    },
                                    tooltip : true,
                                    tooltipOpts : {
                                        content : "%s: %x <span class='block'> %y</span>",
                                        dateFormat : "%y-%0m-%0d",
                                        defaultTheme : false
                                    },
                                    legend: { position: "se" },
                                    colors : [$color_blue, $color_green]
                                };

                                jQuery.plot(bal, d, options);
                            }
                        });
                    });
                });
            });
        });
    });
});

function tzsFormatter(v, axis) {
    return "TZS " + v.toFixed(axis.tickDecimals);
}